---
import Layout from '../layouts/Layout.astro'
import '../styles/app.css'
import '../utils.ts'
import '../styles/carousel.css'
import '../styles/testimonials.css'
---

<Layout title="Residential Electrical Services | Melbourne" description="Discover reliable residential electrical services in Melbourne. From power installations to complete home rewiring, our expert electricians provide professional solutions for homeowners and landlords."> 
    <section class=" h-[70vh] xl:h-[90vh] bg-[url('../images/residential.jpg')] bg-cover bg-center">
        <div class="absolute bg-black bg-opacity-40 h-[70vh] xl:h-[90vh] w-full"></div>
        <div class="container pt-[30vh] relative z-10 xl:pt-[40vh]">
            <p class="font-deco text-[#77B523] mb-2 text-sm font-bold clip-in">Residential & Commercial & Industrial Electrician </p>
            <h1 class="font-heading text-white text-3xl font-bold mb-4 xl:text-5xl xl:w-[60%] fade-in-up">Residential Electrician Melbourne</h1>
        </div>
    </section>
    <section class="bg-[#141E05] rounded-b-[2rem] py-12 xl:py-20">
        <div class="container xl:flex justify-between gap-16">
          <div class="mb-4 xl:w-[80%] fade-in-up">
            <p class="font-deco text-sm font-thin text-[#77B523] mb-2 clip-in">Available 24/7</p>
            <h4 class="font-heading text-white font-bold text-2xl leading-7 xl:text-4xl">Are you looking for a domestic electrician in Melbourne you can rely on?</h4>
          </div>
          <div>
            <p class="text-white mb-4 font-thin fade-in-up xl:text-xl">We offer a comprehensive selection of residential electrical services, all delivered by professional, trustworthy and highly experienced electricians.</p>
            <button class="call-to-action-btn mt-6"><a class="bg-[#77B523] py-3 px-3 rounded-xl text-white hover:bg-[#141E05] hover:border-2 hover:border-[#77B523] duration-300 fade-in" href="#">Request a free quote</a></button>
          </div>
        </div>
      </section>
      <section class="my-16 xl:my-20 relative">
        <img src="../images/group-1.svg" class="absolute left-[0%] top-[0%] right-auto bottom-auto -z-30" alt="">
        <div class="container xl:pl-[30%]">
          <p class="font-deco text-sm font-thin text-[#77B523] mb-2 clip-in">Residential</p>
          <h2 class="font-heading text-[#141E05] font-bold text-2xl leading-6 mb-4 xl:text-4xl fade-in-up">Comprehensive and Affordable Residential Electrical Services Across Melbourne</h2>
          <p class="text-[#141E05] mb-10 fade-in-up">Sick and tired of poor electrical services? We offer a complete range of domestic electrical services for homeowners and landlords. From power points and LED lights to switchboard upgrades and full home rewiring, trust us for professional, high-quality workmanship.</p>
          <div class="mb-10 xl:grid xl:grid-cols-2 xl:gap-1 fade-in-up">
            <div class="flex uppercase border-[#141E05] bg-white border-2 rounded-2xl px-4 py-2  mb-2 xl:mr-6">
              <img class="w-10 mr-6" src="../images/glove.png" alt="">
              <p class="font-bold content-center">TENANCY SAFETY CHECKS</p>
            </div>
            <div class="flex bg-white uppercase border-[#141E05]  border-2 rounded-2xl px-4 py-2  mb-2 xl:mr-6">
              <img class="w-10 mr-6" src="../images/glove.png" alt="">
              <p class="font-bold content-center">HOME WIRING & REWIRING</p>
            </div>
            <div class="flex bg-white uppercase border-[#141E05]  border-2 rounded-2xl px-4 py-2  mb-2 xl:mr-6">
              <img class="w-10 mr-6" src="../images/glove.png" alt="">
              <p class="font-bold content-center">RCD Safety Switches</p>
            </div>
            <div class="flex bg-white uppercase border-[#141E05]  border-2 rounded-2xl px-4 py-2  mb-2 xl:mr-6">
              <img class="w-10 mr-6" src="../images/glove.png" alt="">
              <p class="font-bold content-center">Switchboard Upgrades</p>
            </div>
            <div class="flex bg-white uppercase border-[#141E05]  border-2 rounded-2xl px-4 py-2  mb-2 xl:mr-6">
              <img class="w-10 mr-6" src="../images/glove.png" alt="">
              <p class="font-bold content-center">L.E.D Lighting</p>
            </div>
            <div class="flex bg-white uppercase border-[#141E05]  border-2 rounded-2xl px-4 py-2  mb-2 xl:mr-6">
              <img class="w-10 mr-6" src="../images/glove.png" alt="">
              <p class="font-bold content-center">T.V Points</p>
            </div>
            <div class="flex bg-white uppercase border-[#141E05]  border-2 rounded-2xl px-4 py-2  mb-2 xl:mr-6">
              <img class="w-10 mr-6" src="../images/glove.png" alt="">
              <p class="font-bold content-center">Safety Inspections</p>
            </div>
            <div class="flex bg-white uppercase border-[#141E05]  border-2 rounded-2xl px-4 py-2  mb-2 xl:mr-6">
              <img class="w-10 mr-6" src="../images/glove.png" alt="">
              <p class="font-bold content-center">Dimmer Controls</p>
            </div>
            <div class="flex bg-white uppercase border-[#141E05]  border-2 rounded-2xl px-4 py-2  mb-2 xl:mr-6">
              <img class="w-10 mr-6" src="../images/glove.png" alt="">
              <p class="font-bold content-center">Security Lighting</p>
            </div>
            <div class="flex bg-white uppercase border-[#141E05]  border-2 rounded-2xl px-4 py-2  mb-2 xl:mr-6">
              <img class="w-10 mr-6" src="../images/glove.png" alt="">
              <p class="font-bold content-center">Hot Water Services</p>
            </div>
            <div class="flex bg-white uppercase border-[#141E05]  border-2 rounded-2xl px-4 py-2  mb-2 xl:mr-6">
              <img class="w-10 mr-6" src="../images/glove.png" alt="">
              <p class="font-bold content-center">Oven Installs & Repairs</p>
            </div>
            <div class="flex bg-white uppercase border-[#141E05]  border-2 rounded-2xl px-4 py-2  mb-2 xl:mr-6">
              <img class="w-10 mr-6" src="../images/glove.png" alt="">
              <p class="font-bold content-center">Phone & Internet Points</p>
            </div>
            <div class="flex bg-white uppercase border-[#141E05]  border-2 rounded-2xl px-4 py-2  mb-2 xl:mr-6">
              <img class="w-10 mr-6" src="../images/glove.png" alt="">
              <p class="font-bold content-center">Ceiling Fans</p>
            </div>
            <div class="flex bg-white uppercase border-[#141E05]  border-2 rounded-2xl px-4 py-2  mb-2 xl:mr-6">
              <img class="w-10 mr-6" src="../images/glove.png" alt="">
              <p class="font-bold content-center">Hardwired Smoke Alarms</p>
            </div>
            <div class="flex bg-white uppercase border-[#141E05]  border-2 rounded-2xl px-4 py-2  mb-2 xl:mr-6">
              <img class="w-10 mr-6" src="../images/glove.png" alt="">
              <p class="font-bold content-center">Bathroom Exhaust Fans</p>
            </div>
            <div class="flex bg-white uppercase border-[#141E05]  border-2 rounded-2xl px-4 py-2  mb-2 xl:mr-6">
              <img class="w-10 mr-6" src="../images/glove.png" alt="">
              <p class="font-bold content-center">Garden lighting</p>
            </div>
            <div class="flex bg-white uppercase border-[#141E05]  border-2 rounded-2xl px-4 py-2  mb-2 xl:mr-6">
              <img class="w-10 mr-6" src="../images/glove.png" alt="">
              <p class="font-bold content-center">Pool lighting</p>
            </div>
            <div class="flex bg-white uppercase border-[#141E05]  border-2 rounded-2xl px-4 py-2  mb-2 xl:mr-6">
              <img class="w-10 mr-6" src="../images/glove.png" alt="">
              <p class="font-bold content-center">Mounting TV's</p>
            </div>
            <div class="flex bg-white uppercase border-[#141E05]  border-2 rounded-2xl px-4 py-2  mb-2 xl:mr-6">
              <img class="w-10 mr-6" src="../images/glove.png" alt="">
              <p class="font-bold content-center">Home cinema installs</p>
            </div>
            <div class="flex bg-white uppercase border-[#141E05]  border-2 rounded-2xl px-4 py-2  mb-2 xl:mr-6">
              <img class="w-10 mr-6" src="../images/glove.png" alt="">
              <p class="font-bold content-center">3 phase outlets</p>
            </div>
            <div class="flex bg-white uppercase border-[#141E05]  border-2 rounded-2xl px-4 py-2  mb-2 xl:mr-6">
              <img class="w-10 mr-6" src="../images/glove.png" alt="">
              <p class="font-bold content-center">Feature lighting</p>
            </div>
            <div class="flex bg-white uppercase border-[#141E05]  border-2 rounded-2xl px-4 py-2  mb-2 xl:mr-6">
              <img class="w-10 mr-6" src="../images/glove.png" alt="">
              <p class="font-bold content-center">RCD testing and tagging</p>
            </div>
            <div class="flex bg-white uppercase border-[#141E05]  border-2 rounded-2xl px-4 py-2  mb-2 xl:mr-6">
              <img class="w-10 mr-6" src="../images/glove.png" alt="">
              <p class="font-bold content-center">exit lighting</p>
            </div>
            <div class="flex bg-white uppercase border-[#141E05]  border-2 rounded-2xl px-4 py-2  mb-2 xl:mr-6">
              <img class="w-10 mr-6" src="../images/glove.png" alt="">
              <p class="font-bold content-center">Pendant Lighting</p>
            </div>
            <div class="flex bg-white uppercase border-[#141E05]  border-2 rounded-2xl px-4 py-2  mb-2 xl:mr-6">
              <img class="w-10 mr-6" src="../images/glove.png" alt="">
              <p class="font-bold content-center">Data cabinets</p>
            </div>
            <div class="flex bg-white uppercase border-[#141E05]  border-2 rounded-2xl px-4 py-2  mb-2 xl:mr-6">
              <img class="w-10 mr-6" src="../images/glove.png" alt="">
              <p class="font-bold content-center">USB Power Points</p>
            </div>
          </div>
          <p class="text-[#77B523] font-bold font-deco text-lg">Other services upon request..</p>
        </div>
      </section>
      <section class="py-16 bg-[#141E05] rounded-[2rem] relative z-0 fade-in-up">
        <img src="../images/group-4.svg" class="absolute left-[0%] top-[0%] right-auto bottom-auto -z-10" alt="">
        <div class="container xl:pl-[30%]">
          <p class="font-deco text-sm font-thin text-[#77B523] mb- clip-in">Fast free quote</p>
          <h3 class="font-heading text-white font-bold text-2xl leading-6 mb-4 xl:text-4xl fade-in-up">Request a quote</h3>
          <p class="text-white mb-8">Need professional electrical services? Just fill out the form below with your specific needs, and we'll take care of the rest.</p>
          <form name="quote" method="POST" data-netlify="true" data-netlify-honeypot="bot-field" action="/success">
            <input name="bot-field" class="hidden" type="text">
            <input type="text" name="name" id="name" placeholder="Name" class="block w-full mb-4 py-2 px-2 rounded-md fade-in-up  focus:outline-none " required>
            <input type="email" name="email" id="email" placeholder="Email" class="block w-full mb-4 py-2 px-2 rounded-md fade-in-up  focus:outline-none" required>
            <input type="tel" name="tel" id="tel" placeholder="Phone number" class="block w-full mb-4 py-2 px-2 rounded-md fade-in-up  focus:outline-none" required>
            <input type="text" name="location" id="location" placeholder="Location" class="block w-full mb-4 py-2 px-2 rounded-md fade-in-up  focus:outline-none" required>
            <textarea name="message" id="message" placeholder="Job details" class="block w-full mb-8 py-2 px-2 rounded-md fade-in-up  focus:outline-none h-[150px]" required></textarea>
            <button class="bg-[#77B523] py-3 px-6 rounded-xl text-white font-deco text-sm hover:bg-[#141E05] hover:border-2 hover:border-[#77B523] duration-300 fade-in " type="submit">Send quote request</button>
          </form>
        </div>
      </section>
      <section class="my-12 xl:my-36">
        <div class="container relative">
          <div class="w-[80%] xl:w-[60%] m-auto">
            <p class="font-deco text-sm font-thin text-[#77B523] mb-2 text-center clip-in">Customer Reviews</p>
            <h2 class="font-heading text-[#141E05] font-bold text-2xl leading-6 mb-4 text-center w-[80%] m-auto xl:text-4xl xl:mb-2 fade-in-up">
              What our clients say about us
            </h2>
            <div class="testimonial-carousel fade-in-up">
              <div class="testimonial-item active-testimonial">
                <p class="text-center mb-4">Jack was amazing! He was punctual, professional and nothing was too difficult. I can't recommend Jack highly enough.  It is great to have a hard working honest, friendly electrician making everything just right in your home.</p>
                <p class="font-deco text-sm font-thin text-[#77B523] mb-2 text-center">Diane Alice</p>
              </div>
              <div class="testimonial-item">
                <p class="text-center mb-4">Professional, knowledgeable, responsible and hard worker, Jack is what you are looking for in an electrician to trust the work in your house. His work is exceptional and I can’t recommend him enough. The job is never too small or never too difficult, always “a can do” attitude which is exactly what I was looking for.</p>
                <p class="font-deco text-sm font-thin text-[#77B523] mb-2 text-center">Johnny Gallardo</p>
              </div>
              <div class="testimonial-item">
                <p class="text-center mb-4">Very happy with Jack and the work we got done. Turned around a quote quickly and we were able to book it in shortly afterwards. Had great comms and the workmanship was excellent. Got an EV charger, several fans, and a new powerpoint installed. Would highly recommend Harrington Electrical.</p>
                <p class="font-deco text-sm font-thin text-[#77B523] mb-2 text-center">Ettienne Gous</p>
              </div>
              <!-- Add more testimonials as needed -->
            </div>
            <div class="testimonial-pagination fade-in-up">
              <span class="dot active"></span>
              <span class="dot"></span>
              <span class="dot"></span>
              <!-- Add more dots as needed -->
            </div>
          </div>
          <div class="testimonial-controls fade-in-up xl:absolute xl:w-full">
            <button class="prev-arrow"><img src="../images/left-arrow.svg" class="h-5" alt=""></button>
            <button class="next-arrow"><img src="../images/right-arrow.svg" class="h-5" alt=""></button>
          </div>
        </div>
      </section>
</Layout>

<script>

document.addEventListener('DOMContentLoaded', () => {
  // Utility
  const lerp = (current: number, target: number, factor: number): number => {
    return current * (1 - factor) + target * factor;
  };

  interface MousePosition {
    x: number;
    y: number;
  }

  let mousePosition: MousePosition = { x: 0, y: 0 };
  window.addEventListener('mousemove', (e: MouseEvent) => {
    mousePosition.x = e.pageX;
    mousePosition.y = e.pageY;
  });

  // Calculate distance between 2 points
  const calculateDistance = (x1: number, y1: number, x2: number, y2: number): number => {
    return Math.hypot(x1 - x2, y1 - y2);
  };

  class MagneticObject {
    private domElement: HTMLElement;
    private boundingClientRect: DOMRect;
    private triggerArea: number;
    private interpolationFactor: number;
    private lerpingData: {
      x: { current: number; target: number };
      y: { current: number; target: number };
    };

    constructor(domElement: HTMLElement) {
      this.domElement = domElement;
      this.boundingClientRect = this.domElement.getBoundingClientRect();
      this.triggerArea = 200;
      this.interpolationFactor = 0.8;

      this.lerpingData = {
        x: { current: 0, target: 0 },
        y: { current: 0, target: 0 },
      };

      this.resize();
      this.render();
    }

    private resize() {
      window.addEventListener("resize", () => {
        this.boundingClientRect = this.domElement.getBoundingClientRect();
      });
    }

    private render() {
      const distanceFromMouseToCenter = calculateDistance(
        mousePosition.x,
        mousePosition.y,
        this.boundingClientRect.left + this.boundingClientRect.width / 2,
        this.boundingClientRect.top + this.boundingClientRect.height / 2
      );

      let targetHolder = { x: 0, y: 0 };
      if (distanceFromMouseToCenter < this.triggerArea) {
        this.domElement.classList.add("focus");
        targetHolder.x = (mousePosition.x - (this.boundingClientRect.left + this.boundingClientRect.width / 2)) * 0.3;
        targetHolder.y = (mousePosition.y - (this.boundingClientRect.top + this.boundingClientRect.height / 2)) * 0.3;
      } else {
        this.domElement.classList.remove("focus");
      }
      this.lerpingData.x.target = targetHolder.x;
      this.lerpingData.y.target = targetHolder.y;

      for (const item in this.lerpingData) {
        if (this.lerpingData.hasOwnProperty(item)) {
          this.lerpingData[item as "x" | "y"].current = lerp(
            this.lerpingData[item as "x" | "y"].current,
            this.lerpingData[item as "x" | "y"].target,
            this.interpolationFactor
          );
        }
      }

      this.domElement.style.transform = `translate(${this.lerpingData.x.current}px, ${this.lerpingData.y.current}px)`;

      window.requestAnimationFrame(() => this.render());
    }
  }

  const buttons = document.querySelectorAll(".call-to-action-btn");
  if (buttons.length > 0) {
    buttons.forEach(button => {
      if (button instanceof HTMLElement) {
        new MagneticObject(button);
      }
    });
  } else {
    console.error('Buttons with class "call-to-action-btn" not found.');
  }
});


// Utility function for linear interpolation


// // image
// interface Lerp {
//   current: number;
//   target: number;
//   ease: number;
// }

// class LoopingElement {
//   private element: HTMLElement;
//   private currentTranslation: number;
//   private speed: number;
//   private metric: number;
//   private direction: boolean;
//   private scrollTop: number;
//   private lerp: Lerp;

//   constructor(element: HTMLElement, currentTranslation: number, speed: number) {
//     this.element = element;
//     this.currentTranslation = currentTranslation;
//     this.speed = speed;
//     this.metric = 100;
//     this.direction = true;
//     this.scrollTop = 0;

//     this.lerp = {
//       current: this.currentTranslation,
//       target: this.currentTranslation,
//       ease: 0.1,
//     };
    
//     this.events();
//     this.render();
//   }

//   private events() {
//     window.addEventListener('scroll', () => {
//       const direction = window.pageYOffset;
//       if (direction > this.scrollTop) {
//         this.direction = true;
//         this.lerp.target += this.speed * 5;
//       } else {
//         this.direction = false;
//         this.lerp.target -= this.speed * 5;
//       }
//       this.scrollTop = direction <= 0 ? 0 : direction;
//     });
//   }

//   private lerpFunc(current: number, target: number, ease: number) {
//     this.lerp.current = current * (1 - ease) + target * ease;
//   }

//   private right() {
//     this.lerp.target += this.speed;
//     if (this.lerp.target > this.metric) {
//       this.lerp.current -= this.metric * 2;
//       this.lerp.target -= this.metric * 2;
//     }
//   }

//   private left() {
//     this.lerp.target -= this.speed;
//     if (this.lerp.target < -this.metric) {
//       this.lerp.current -= -this.metric * 2;
//       this.lerp.target -= -this.metric * 2;
//     }
//   }

//   private animate() {
//     this.lerpFunc(this.lerp.current, this.lerp.target, this.lerp.ease);
//     this.element.style.transform = `translateX(${this.lerp.current}%)`;
//   }

//   private render() {
//     this.direction ? this.right() : this.left();
//     this.animate();
//     window.requestAnimationFrame(() => this.render());
//   }
// }

// document.addEventListener('DOMContentLoaded', () => {
//   const elements = document.querySelectorAll<HTMLElement>('.item');
//   elements.forEach((element, index) => {
//     new LoopingElement(element, index % 2 === 0 ? 0 : -100, 0.1);
//   });

//   const imagesArray = document.querySelectorAll<HTMLElement>('.images-wrapper');
//   imagesArray.forEach((image, index) => {
//     new LoopingElement(image, index % 2 === 0 ? 0 : -100, 0.1);
//   });
// });

// Testimonial Code

class TestimonialCarousel {
  private currentIndex: number = 0;
  private items: NodeListOf<HTMLElement>;
  private dots: NodeListOf<HTMLElement>;
  private transitioning: boolean = false;

  constructor() {
    this.items = document.querySelectorAll('.testimonial-item');
    this.dots = document.querySelectorAll('.dot');
    this.showItem(this.currentIndex);

    document.querySelector('.prev-arrow')?.addEventListener('click', () => this.prevItem());
    document.querySelector('.next-arrow')?.addEventListener('click', () => this.nextItem());
    this.dots.forEach((dot, index) => {
      dot.addEventListener('click', () => this.showItem(index));
    });
  }

  private showItem(index: number) {
    if (this.transitioning) return;
    this.transitioning = true;

    const currentItem = this.items[this.currentIndex];
    const nextItem = this.items[index];

    currentItem.classList.remove('active-testimonial', 'fade-in-testimonial');
    currentItem.classList.add('fade-out-testimonial');

    nextItem.classList.add('active-testimonial', 'fade-in-testimonial');

    setTimeout(() => {
      currentItem.classList.remove('fade-out-testimonial');
      this.transitioning = false;
    }, 500);

    this.dots.forEach((dot, i) => dot.classList.toggle('active', i === index));
    this.currentIndex = index;
  }

  private prevItem() {
    const index = (this.currentIndex - 1 + this.items.length) % this.items.length;
    this.showItem(index);
  }

  private nextItem() {
    const index = (this.currentIndex + 1) % this.items.length;
    this.showItem(index);
  }
}

document.addEventListener('DOMContentLoaded', () => {
  new TestimonialCarousel();
});

// Text Animations

//  FADE IN 
document.addEventListener('DOMContentLoaded', () => {
  const faders: NodeListOf<HTMLElement> = document.querySelectorAll(".fade-in");
  const fadeUp: NodeListOf<HTMLElement> = document.querySelectorAll(".fade-in-up");
  const fadeInLeft: NodeListOf<HTMLElement> = document.querySelectorAll(".fade-in-left");
  const fadeInRight: NodeListOf<HTMLElement> = document.querySelectorAll(".fade-in-right");
  const clipIn: NodeListOf<HTMLElement> = document.querySelectorAll(".clip-in");

  const appearOnScrollOptions: IntersectionObserverInit = {
    threshold: 0,
    rootMargin: "0px 0px 0px 0px"
  };

  const appearOnScroll = new IntersectionObserver((entries, observer) => {
    entries.forEach(entry => {
      if (!entry.isIntersecting) {
        return;
      } else {
        entry.target.classList.add('appear');
        observer.unobserve(entry.target);
      }
    });
  }, appearOnScrollOptions);

  faders.forEach(fader => {
    appearOnScroll.observe(fader);
  });

  fadeUp.forEach(fader => {
    appearOnScroll.observe(fader);
  });

  fadeInLeft.forEach(fader => {
    appearOnScroll.observe(fader);
  });

  fadeInRight.forEach(fader => {
    appearOnScroll.observe(fader);
  });

  clipIn.forEach(fader => {
    appearOnScroll.observe(fader);
  });
});

</script>